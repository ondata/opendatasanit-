<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<title>Tomorrow's Professor Mailing List</title>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <script type="text/javascript" src="https://www.google.com/jsapi"></script>
        <script type="text/javascript" src="../js/jquery-1.11.1.min.js"></script>
        <script type="text/javascript" src="../js/d3.3.5.5.min.js" charset="utf-8"></script>
        <script type="text/javascript" src="../keshif.js" charset="utf-8"></script>
        <link rel="stylesheet" href="../keshif.css"/ type="text/css">
        <link rel="stylesheet" href="../font-awesome/css/font-awesome.min.css">

        <script type="text/javascript" src="./js/demo.js" charset="utf-8"></script>
        <link rel="stylesheet" href="./css/style.css"/ type="text/css">

        <script type="text/javascript">

function resetSize(){
    $('#chart_div').height($(window).height()-40);
    $('#chart_div').width(700);
};

$(document).ready( function(){
    resetSize();

	browser = new kshf.Browser({
    domID: "#chart_div",
    categoryTextWidth: 300,
    source: {
      gdocId: '0Ai6LdDWgaqgNdFoxeFJscUR6MEMtekpSRTh1aEk2aXc',
      tables: ["Posts", "Categories"]
    },
    summaries: [ 
      { name: "Category", catTableName: "Categories", catLabel: "Category", panel: "middle" },
      { name: "Date", panel:'middle',
        value: function(){
          var r =new Date(Date.now());
          r.setDate(r.getDate()-this.id*4);
          return r;
        } 
      }
    ],
    itemDisplay: {
        textSearch: "Title",
        detailsToggle: "one",
        recordView: function(){
            var str="";
            // title
            str+="<div class=\"iteminfo iteminfo_0\">";
            str+="<a href=\"http://cgi.stanford.edu/~dept-ctl/cgi-bin/tomprof/posting.php?ID="+this.id+"\" target=\"_blanl\">"+this.Title+"<a/>";
            str+="</div>";

            str+="<span class=\"item_details\">";
            // categories
            str+="<div class=\"iteminfo iteminfo_1\">In: "+
                kshf.dt_id.Categories[this.Category].data.Category+
                "</div>";
            str+="</span>";

            str+="</div>";
            return str;
        }
    }
  });
});

function getNumComments(v){
    if(v==0) return "None";
    if(v<6) return "1-5";
    if(v<11) return "6-10";
    if(v<21) return "11-20";
    return ">20";
};
        </script>
        <style>
            .kshfRecord{
                padding-bottom: 4px;
            }
            .iteminfo a{
                color:#606060;
                font-style:italic;
            }
        </style>
    </head>
    <body>
        <div class="contents"><div id="chart_div"></div></div>
    </body>
</html>